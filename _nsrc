
export NETSERVA_VERSION="3.0.0"

export NS="${NS:-$HOME/.ns}"                 # NetServa Directory (root)

export NS_SUCCESS="âœ…"                       # Success indicator
export NS_ERROR="âŒ"                         # Error indicator
export NS_WARN="âš ï¸ "                          # Warning indicator (extra space for alignment)
export NS_INFO="â„¹ï¸ "                          # Info indicator
export NS_DEBUG="ðŸ”"                         # Debug indicator
export NS_PROGRESS="ðŸ”„"                      # Progress/working indicator
export NS_DONE="âœ¨"                          # Completion/done indicator
export NS_ROCKET="ðŸš€"                        # Launch/start indicator
export NS_LOCK="ðŸ”’"                          # Security/locked indicator
export NS_KEY="ðŸ”‘"                           # Key/unlock indicator
export NS_FOLDER="ðŸ“"                        # Folder/directory indicator
export NS_FILE="ðŸ“„"                          # File indicator
export NS_MAIL="ðŸ“§"                          # Mail indicator
export NS_WEB="ðŸŒ"                           # Web/network indicator
export NS_DB_ICON="ðŸ—„ï¸ "                       # Database icon (renamed to avoid conflict)

alias a='php artisan'
alias c='composer'
alias lx='lxc list'
alias ns_reload='source "$NS/_nsrc"; echo "NetServa environment reloaded"'

if [[ -d "$NS/bin" ]] && [[ ":$PATH:" != *":$NS/bin:"* ]]; then
    export PATH="$NS/bin:$PATH"
fi

export NS_DB="$NS/database/database.sqlite"

ns_log() {
    local level="$1"
    shift
    local timestamp=$(date '+%Y-%m-%d %H:%M:%S')
    echo "[$timestamp] [$level] $*" | tee -a "$NS/storage/logs/netserva.log" >&2
}

ns_db() {
    sqlite3 "$NS_DB" "$@"
}

ns_ssh_host_exists() {
    local ssh_host="$1"
    [[ -f "$HOME/.ssh/hosts/$ssh_host" ]]
}

ns_remote_exec() {
    local ssh_host="$1"
    shift
    ssh "$ssh_host" "sudo" bash -s "$@"
}

nspull() {
    cd "$NS"
    git pull
}

nspush() {
    cd "$NS"
    if [[ -n "$1" ]]; then
        git commit -am "$*"
    else
        git commit -a
    fi
    git push
}
